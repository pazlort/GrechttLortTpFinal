import { query, orderBy, where, collection, getDocs } from '@firebase/firestore';
import { doc, getDoc } from "firebase/firestore";
import { db } from "./firebaseConfig";

const firestoreFetch = async (idCategory) => {

    let filtarCategoria;
    if (idCategory) {
        filtarCategoria = query(collection(db, "products"), where('categoryId', '==', idCategory));
    } else {
        filtarCategoria = query(collection(db, "products"));
    }

    const querySnapshot = await getDocs(filtarCategoria);
    const dataFromFirestore = querySnapshot.docs.map(item => ({
        id: item.id,
        ...item.data()
    }));
    return dataFromFirestore;
};

export default firestoreFetch;